<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="fragments/commons::head"></head>
<body>
<nav th:replace="fragments/commons::nav"></nav>

<div th:if="${allOrders.size==0}" class="p-5 bg-blur text-center my-main">
    <div class="row">
        <a id="AllUsers" class="link-light"  href="/admin">BACK TO ADMIN PANEL</a></h1>
    </div>

</div>
<div  class="container-fluid" style="overflow: auto">

    <table id="AdminCategories" class="table table-responsive table-hover bg-light text-dark rounded"
           style="overflow-x:scroll">
        <thead>

        <h1 class="display-4 text-white">ALL ORDERS
            <th:block th:text="|( ${count} )|"></th:block>
        </h1>
        <tr scope="row" class="bg-transparent">

            <th scope="col">Order Number</th>
            <th scope="col">Order Date</th>
            <th scope="col">Buyer Username</th>
            <th scope="col">Purchase Amount</th>
            <th scope="col"><a class="card-link text-white bg-success" href="/admin">Back to Admin panel</a></th>
        </tr>
        </thead>

        <tbody class="table-primary">
        <tr scope="row" th:each="order: ${allOrders}">
            <td th:text="${order.id}"></td>
            <td th:text="${order.date}"></td>
            <td th:text="${order.user.email}"></td>
            <td th:text="|${orderService.getTotalPriceOfOrder(order.id)} $|"></td>
            </td>


            <td th:if="${order.user.id}==1" class="text-info rounded">TEST ORDER</td>
            <td th:if="${order.user.id}!=1">
                <a th:href="@{/admin/orders/delete/{id}(id=${order.id})}" class="text-danger rounded">REMOVE ORDER</a>
            </td>
            <td>
                <a th:href="@{/admin/orders/details/{id}(id=${order.id})}" target="_blank">ORDER DETAILS</a>
            </td>

        </tr>
        <tr>
            <th scope="col"></th>
            <th scope="col"></th>
            <th scope="col">Estimated Total:</th>
            <th scope="col" th:text="|${totalTurnover} $|">223.45 $</th>
            <th scope="col"></th>
            <th scope="col"></th>
        </tr>
        </tbody>

    </table>
</div>


<footer th:replace="fragments/commons::footer"></footer>


</body>

</html>